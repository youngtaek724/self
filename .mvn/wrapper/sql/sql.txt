-- Active: 1718597644508@@127.0.0.1@3307@sesk

-- 이메일 인증 정보
CREATE TABLE AUTH_STORE (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    STATUS ENUM('UNAUTHENTICATED', 'EXPIRED', 'AUTHENTICATED') NOT NULL COMMENT '인증상태: UNAUTHENTICATED(미인증), EXPIRED(만료),AUTHENTICATED(인증완료)',
    TARGET_KEY VARCHAR(255) NOT NULL COMMENT '인증 대상',
    AUTH_KEY VARCHAR(255) NOT NULL COMMENT '인증 번호',
    REQUEST_TIME TIMESTAMP NOT NULL COMMENT '요청시간',
    EXPIRE_TIME TIMESTAMP COMMENT '만료시간',
    VALIDATED_TIME TIMESTAMP COMMENT '인증시간'
) COMMENT='이메일 인증 정보';

select * from AUTH_STORE;

-- 랭크
CREATE TABLE RANK_INFO (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    COMMISION INTEGER NOT NULL COMMENT '계약 수수료',
    RANK_TYPE ENUM('BRONZE', 'SILVER', 'GOLD') NOT NULL COMMENT '등급: BRONZE, SILVER, GOLD',
    USER_TYPE ENUM('USER', 'HOTEL') NOT NULL COMMENT '고객 구분: USER, HOTEL'
) COMMENT='랭크';

select * from RANK_INFO;

-- 고객정보 
CREATE TABLE USER_INFO (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    USER_ID VARCHAR(255) NOT NULL COMMENT '아이디',
    PASSWORD VARCHAR(255) NOT NULL COMMENT '비밀번호',
    NAME VARCHAR(255) NOT NULL COMMENT '회원명',
    PHONE VARCHAR(255) NOT NULL COMMENT '핸드폰번호',
    DEFAULT_ADDR VARCHAR(255) COMMENT '기본주소',
    DETAIL_ADDR VARCHAR(255) COMMENT '상세주소',
    ZIP_CODE VARCHAR(255) COMMENT '우편번호',
    EMAIL VARCHAR(255) NOT NULL COMMENT '이메일',
    TYPE ENUM('USER', 'HOTEL', 'ADMIN') NOT NULL COMMENT '타입:USER, HOTEL, ADMIN',
    RGST_DATE TIMESTAMP NOT NULL COMMENT '가입일',
    UPDATE_DATE TIMESTAMP NOT NULL COMMENT '수정일(탈퇴일)',
    STATUS ENUM('USING', 'STOP', 'WITHDROW') NOT NULL COMMENT '상태: USING, STOP, WITHDRAW',
    RANK_ID INTEGER NOT NULL COMMENT 'rank_info 테이블',
    FOREIGN KEY (RANK_ID) REFERENCES rank_info (ID)
) COMMENT='고객정보';

select * from USER_INFO;

-- 유저 쿠폰
CREATE TABLE USER_COUPON (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT COMMENT 'SEQ(AUTO)',
    USER_ID INTEGER NOT NULL COMMENT 'user_info 테이블',
    COUPON_ID INTEGER NOT NULL COMMENT 'coupon_info 테이블',
    USE_DATE TIMESTAMP COMMENT '사용날짜',
    USE_YN BOOLEAN NOT NULL COMMENT '사용여부',
    FOREIGN KEY (USER_ID) REFERENCES USER_INFO (ID),
    FOREIGN KEY (COUPON_ID) REFERENCES COUPON_INFO (ID)
) COMMENT='유저 쿠폰';

select * from USER_COUPON;


-- 쿠폰 정보
CREATE TABLE COUPON_INFO (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    USER_ID INTEGER NOT NULL COMMENT 'user_info 테이블',
    USE_YN BOOLEAN NOT NULL COMMENT '발급여부',
    RGST_DATE TIMESTAMP NOT NULL COMMENT '발급일',
    EXPIRE_DATE TIMESTAMP COMMENT '만료일',
    STATUS ENUM('PERCENT', 'KRW') NOT NULL COMMENT '할인타입: PERCENT, KRW',
    DUPLICATE BOOLEAN NOT NULL COMMENT '중복사용여부',
    PRICE INTEGER NOT NULL COMMENT '할인가격',
    SYSTEM_NAME ENUM('HOTEL', 'ADMIN') NOT NULL COMMENT '발급시스템명',
    QUANTITY INTEGER COMMENT '발급수량',
    FOREIGN KEY (USER_ID) REFERENCES USER_INFO (ID)
) COMMENT='쿠폰';

select * from COUPON_INFO;

-- 호텔 정보
CREATE TABLE HOTEL_MST (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(255) NOT NULL COMMENT '호텔명',
    TEL VARCHAR(255) NOT NULL COMMENT '전화번호',
    DEFAULT_ADDR VARCHAR(255) NOT NULL COMMENT '기본 주소',
    DETAIL_ADDR VARCHAR(255) NOT NULL COMMENT '상세주소',
    CITY VARCHAR(255) NOT NULL COMMENT '지역',
    STATE ENUM('1', '2', '3') COMMENT '상태:1, 2, 3',
    ZIP_CODE VARCHAR(255) NOT NULL COMMENT '우편번호',
    COUNTRY VARCHAR(255) NOT NULL COMMENT '나라',
    CATEGORY VARCHAR(255) COMMENT '카테고리'
) COMMENT='호텔 정보';

select * from HOTEL_MST;

-- 위시리스트
CREATE TABLE WISH_LIST (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    HOTEL_ID INTEGER NOT NULL COMMENT 'hotel_mst 테이블',
    USER_ID INTEGER NOT NULL COMMENT 'user_info 테이블',
    FOREIGN KEY (HOTEL_ID) REFERENCES hotel_mst (ID),
    FOREIGN KEY (USER_ID) REFERENCES USER_INFO (ID)
) COMMENT='위시리스트(찜목록)';

select * from WISH_LIST;

-- 룸 정보
CREATE TABLE ROOM_INFO (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    HOTEL_ID INTEGER NOT NULL COMMENT 'hotel_mst 테이블',
    NAME VARCHAR(255) NOT NULL COMMENT '방 이름',
    PRICE INTEGER  NOT NULL COMMENT '가격',
    DESCRIPTION VARCHAR(255) NOT NULL COMMENT '설명',
    TYPE ENUM('SINGLE', 'DOUBLE', 'SUITE') NOT NULL COMMENT '타입:SINGLE, DOUBLE, SUITE',
    MAX_OCCUPANCY INTEGER NOT NULL COMMENT '최대인원수',
    SMOKING_ALLOWED BOOLEAN NOT NULL COMMENT '흡연가능여부',
    WIFI_YN BOOLEAN NOT NULL COMMENT '와이파이',
    TV_YN BOOLEAN NOT NULL COMMENT '티비',
    PARKING_YN BOOLEAN NOT NULL COMMENT '주차가능여부',
    BREAKFAST_INCLUDED BOOLEAN NOT NULL COMMENT '조식여부',
    BED_CNT INTEGER NOT NULL COMMENT '침대 수',
    FOREIGN KEY (HOTEL_ID) REFERENCES HOTEL_MST (ID)
) COMMENT='룸 정보';

select * from ROOM_INFO;

-- 계약 정보
CREATE TABLE CONTRACT_INFO (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    HOTEL_ID INTEGER NOT NULL COMMENT 'HOTEL_MST 테이블',
    RANK_ID INTEGER NOT NULL COMMENT 'RANK_INFO 테이블',
    ST_DATE TIMESTAMP NOT NULL COMMENT '계약 시작일',
    ED_DATE TIMESTAMP NOT NULL COMMENT '계약 종료일',
    FOREIGN KEY (HOTEL_ID) REFERENCES hotel_mst(ID),
    FOREIGN KEY (RANK_ID) REFERENCES rank_info(ID)
) COMMENT='계약 정보';

select * from CONTRACT_INFO;

-- 예약 정보
CREATE TABLE RESERVATION_INFO (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    USER_ID INTEGER NOT NULL COMMENT 'user_info 테이블',
    ROOM_ID INTEGER NOT NULL COMMENT 'room_info 테이블',
    CHECK_IN TIMESTAMP NOT NULL COMMENT '체크인 시간',
    CHECK_OUT TIMESTAMP NOT NULL COMMENT '체크아웃 시간',
    PAY_YN BOOLEAN NOT NULL COMMENT '결제 완료 여부',
    CREATED_AT TIMESTAMP NOT NULL COMMENT '예약 신청 일자',
    COUPON_ID INTEGER COMMENT 'coupon 테이블',
    COUPON_PRICE INTEGER COMMENT '쿠폰 적용 가격',
    ROOM_PRICE INTEGER NOT NULL COMMENT '객실 가격',
    FOREIGN KEY (USER_ID) REFERENCES user_info(ID),
    FOREIGN KEY (ROOM_ID) REFERENCES room_info(ID),
    FOREIGN KEY (COUPON_ID) REFERENCES coupon_info(ID)
) COMMENT='예약 정보';

select * from RESERVATION_INFO;

-- 리뷰
CREATE TABLE REVIEW (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    USER_ID INTEGER NOT NULL COMMENT 'user_info 테이블',
    CONTENT VARCHAR(255) NOT NULL COMMENT '내용',
    RSVT_ID INTEGER NOT NULL COMMENT 'reservation_info 테이블',
    STAR INTEGER NOT NULL COMMENT '별점',
    FOREIGN KEY (USER_ID) REFERENCES USER_INFO (ID),
    FOREIGN KEY (RSVT_ID) REFERENCES reservation_info (ID)
) COMMENT='리뷰';

select * from REVIEW;

CREATE TABLE ADMIN (
    ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    ADMIN_ID VARCHAR(255) NOT NULL COMMENT '관리자 아이디',
    PASSWORD VARCHAR(255) NOT NULL COMMENT '비밀번호') COMMENT '관리자';

SELECT * FROM ADMIN;
